<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contrôle des billets - Poste agent</title>

    <link rel="stylesheet" href="css/styles.css?v=3" />
</head>

<body>
<header>
    <div class="header-inner">
        <div class="logo-badge">CL</div>
        <div>
            <h1>Contrôle des billets - Poste agent</h1>
            <p>Centre de loisirs (poste de contrôle)</p>
        </div>
    </div>
</header>

<main>

<section class="card" id="loginSection">
  <h2>Connexion agent</h2>

  <div class="form-row">
    <label for="agentCode">Code agent :</label>
    <input
      type="text"
      id="agentCode"
      placeholder="Ex : ENTREE1"
      autocomplete="off"
    />
  </div>

  <div class="form-row">
    <label for="agentPassword">Mot de passe :</label>
    <input
      type="password"
      id="agentPassword"
      placeholder="Mot de passe"
      autocomplete="off"
    />
  </div>

  <div class="form-row">
    <button id="loginBtn">Se connecter</button>
  </div>

  <p id="login-message" class="message"></p>
</section>

    <section class="card" id="billetsSection" style="display:none;">
  <h2>Billets chargés</h2>
        <p>
            Nombre de billets disponibles dans ce navigateur :
            <strong><span id="ticketCount">0</span></strong>
        </p>
        <p style="font-size:0.9rem;">
            Si le nombre est <strong>0</strong>, demander à l'administrateur
            d'importer les billets depuis la page <strong>admin</strong> sur cet appareil.
        </p>
    </section>

   <section class="card" id="validationSection" style="display:none;">
  <h2>Validation d’un billet</h2>

  <p id="agentInfo" class="message message-info" style="display:none;">
    <!-- rempli par JS : ex. "Connecté : ENTREE1 (Poste entrée)" -->
  </p>

  <!-- Choix du tarif -->
  <div class="form-row">
    <label>Tarif appliqué :</label>
    <div class="radio-group">
      <label>
        <input type="radio" name="tarif" value="normal" checked />
        Normal
      </label>
      <label>
        <input type="radio" name="tarif" value="etudiant" />
        Étudiant
      </label>
    </div>
  </div>

  <!-- Numéro étudiant (affiché seulement si "Étudiant" est choisi) -->
  <div class="form-row" id="studentRow" style="display:none;">
    <label for="studentNumber">Numéro étudiant :</label>
    <input
      type="text"
      id="studentNumber"
      placeholder="Numéro étudiant"
    />
  </div>

  <!-- Numéro de billet -->
  <div class="form-row">
    <label for="ticketNumber">Numéro du billet :</label>
    <input type="text" id="ticketNumber" placeholder="Ex : 26-0001" />
    <button id="validateBtn">Valider ➤</button>
  </div>

  <p id="result-message" class="message"></p>
</section>


</main>

<footer>
    <p>© Centre de loisirs - Poste Agent</p>
</footer>

<!-- SDK Appwrite -->
<script src="https://cdn.jsdelivr.net/npm/appwrite@13.0.0"></script>
<script src="js/agent-appwrite.js"></script>
</body>
</html>



