<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ContrÃ´le des billets - Poste agent</title>
    <link rel="stylesheet" href="css/styles.css?v=4" />
</head>

<body>
<header>
    <div class="header-inner">
        <div class="logo-badge">CL</div>
        <div>
            <h1>ContrÃ´le des billets - Poste agent</h1>
            <p>Centre de loisirs (poste de contrÃ´le)</p>
        </div>
    </div>
</header>

<main>
    <!-- Section Connexion - Toujours visible -->
    <section class="card" id="loginSection">
        <h2>ğŸ” Connexion agent</h2>

        <div class="form-row">
            <label for="agentCode">Code agent :</label>
            <input
                type="text"
                id="agentCode"
                placeholder="agent"
                autocomplete="username"
            />
        </div>

        <div class="form-row">
            <label for="agentPassword">Mot de passe :</label>
            <input
                type="password"
                id="agentPassword"
                placeholder="â€¢â€¢â€¢â€¢"
                autocomplete="current-password"
            />
        </div>

        <button id="btnLogin" class="btn-primary">
            Se connecter â–¸
        </button>

        <button id="btnLogout" class="btn-secondary" style="display:none;">
            Se dÃ©connecter
        </button>

        <p id="loginMessage" class="message"></p>
        <p id="agentInfo" class="agent-info" style="display:none;"></p>
    </section>

    <!-- Sections cachÃ©es par dÃ©faut - AffichÃ©es aprÃ¨s connexion -->
    <div id="dashboardSection" style="display:none;">
        <section class="card" id="billetsSection">
            <h2>ğŸ« Billets disponibles</h2>
            <p class="big-number">
                <span id="ticketCount">0</span> billets disponibles
            </p>
        </section>

        <section class="card" id="validationSection">
            <h2>ğŸŸï¸ Validation d'un billet</h2>

            <div class="form-row">
                <span>Tarif appliquÃ© :</span>
                <label class="radio-inline">
                    <input type="radio" name="tarifType" value="normal" checked>
                    Normal
                </label>
                <label class="radio-inline">
                    <input type="radio" name="tarifType" value="etudiant">
                    Ã‰tudiant
                </label>
            </div>

            <div class="form-row">
                <label for="studentNumber">NumÃ©ro Ã©tudiant (si tarif Ã©tudiant) :</label>
                <input type="text" id="studentNumber" placeholder="Ex : USTG-12345" />
            </div>

            <div class="form-row">
                <label for="ticketNumber">NumÃ©ro du billet :</label>
                <input type="text" id="ticketNumber" placeholder="Ex : 26-0001" />
                <button id="validateBtn" class="btn-primary">Valider â–¶â–¶</button>
            </div>

            <p id="result-message" class="message"></p>

            <!-- Carte rÃ©cap visuelle -->
            <div id="validationSummary" class="validation-summary" style="display:none;">
                <h3>DÃ©tail de la validation</h3>

                <div class="summary-row">
                    <span class="label">Billet</span>
                    <span class="value" id="valNumBillet"></span>
                </div>
                <div class="summary-row">
                    <span class="label">Type d'accÃ¨s</span>
                    <span class="value" id="valTypeAcces"></span>
                </div>
                <div class="summary-row">
                    <span class="label">Tarif choisi</span>
                    <span class="value" id="valTarifChoisi"></span>
                </div>
                <div class="summary-row">
                    <span class="label">Tarif normal</span>
                    <span class="value" id="valTarifNormal"></span>
                </div>
                <div class="summary-row">
                    <span class="label">Tarif Ã©tudiant</span>
                    <span class="value" id="valTarifEtudiant"></span>
                </div>
                <div class="summary-row">
                    <span class="label">Montant payÃ©</span>
                    <span class="value" id="valMontantPaye"></span>
                </div>
                <div class="summary-row">
                    <span class="label">NÂ° Ã©tudiant</span>
                    <span class="value" id="valNumeroEtudiant"></span>
                </div>
            </div>
        </section>
    </div>
</main>

<footer>
    <p>Â© Centre de loisirs - Poste Agent</p>
</footer>

<!-- SDK Appwrite -->
<script src="https://cdn.jsdelivr.net/npm/appwrite@13.0.0"></script>
<script src="js/agent-appwrite.js"></script>
</body>
</html>


